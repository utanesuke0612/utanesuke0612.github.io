---
layout: post
title: C#入门经典第6章至第10章
date: 2020-03-27 01:02:01
categories: CSharp
tags: CSharp
---
* content
{:toc}

# 1. 函数

本章主要内容：
1. 如何定义及使用，既不接收数据也不返回值的简单函数
2. 如何在函数传入传出数据
3. 使用变量作用域
4. 如何结合使用Main函数和命令行函数
5. 如何把函数提供为结构类型成员
6. 如何使用函数重载
7. 使用使用委托

除了第7以外的概念，都是理解的。

## 1.1 定义和使用函数

- 参数数组

C#运行指定给一个特殊参数，这个参数必须是函数定义的最后一个参数，称为参数数组，允许使用个数不定的参数调用数组，使用`params`关键字定义它们。
> Python中也有类似用法

```C#
namespace ConsoleApp1
{
    class Program
    {

        static int Sumvals(params int[] vals)
        {
            int sum = 0;
            foreach (int val in vals)
            {
                sum += val;
            }
            return sum;
        }

        static void Main(string[] args)
        {
            int sum = Sumvals(1, 3, 4, 4);

            WriteLine($"Summed Values = {sum}");
            ReadKey();

        }
    }
}
```

上面代码中直接使用了WriteLine和Readkey，因为添加了`using static System.Console;`。

- 引用参数和值参数

使用参数时，通过引用传递参数，即函数处理的变量与函数调用中使用的变量相同，对这个变量进行的修改，会影响原来的参数，需要使用`ref`关键字来指定参数。

但是使用ref，必须有两个限制：
- 只能针对非常量，如果针对const变量，那是非法的。
- 必须使用初始化过的变量。

```C#
namespace ConsoleApp1
{
    class Program
    {
        static void ShowDouble(ref int val) {
            val *= 2;
            WriteLine($"val doubled = {val}");
        }
        static void Main(string[] args)
        {
            int sum = 5;
            WriteLine($"original = {sum}");
            ShowDouble(ref sum);
            ReadKey();
        }
    }
}
```

输出：
original = 5
val doubled = 10

- 输出参数

除了按引用传递值外，还可以使用out关键字，指定所给的参数时一个输出参数。但是与引用ref有下面的区别：
- 可以把未赋值的变量用作out参数
- 函数在会使用out参数时，必须把他看成未赋值。

即使把已赋值的变量用作out参数，但存储在该变量的值会在函数执行时丢失。
因为out的值，是用于输出的，所以原始值有与没有都无所谓。


示例代码：

```C#
    class Program
    {
        static int MaxValue(int[] intArray, out int maxIndex) {
            int maxVal = intArray[0];
            maxIndex = 0;
            for (int i = 1; i < intArray.Length; i++) {
                if (intArray[i] > maxVal) {
                    maxVal = intArray[i];
                    maxIndex = i;
                }
            }
            return maxVal;
        }
        static void Main(string[] args)
        {
            int[] myArray = { 1, 2, 3, 4, 5, 3, 3, 3, 7, 1, 1 };
            int maxIndex;
            WriteLine($"Max is : {MaxValue(myArray,out maxIndex)}");
            WriteLine($"index is in : {maxIndex+1}");
            ReadKey();
        }
    }
}
```

输出如下：

```
Max is : 7
index is in : 9
```

注意：
- out的参数，必须在该函数中再次赋值，否则编译出错
- out参数可以放多个，用法一样。

## 1.2 变量作用域


# 2. 调试和错误处理

# 3. 面向对象编程

# 4. 定义类

# 5. 定义类成员

