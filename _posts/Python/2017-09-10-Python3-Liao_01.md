---
layout: post
title: Python入门-Liao-01-变量/控制/数据结构
date: 2017-09-09 22:45:59
categories: Python
tags: Python
---
* content
{:toc}

> [Python-Liao-XX...]系列,系列根据廖雪峰的python3初级教程学习整理。


# 1. 字符串中的转义符

```python
In [17]: print("I am \"OK\"!")
I am "OK"!
```

- 转义字符\可以转移很多字符，比如\n表示换行，\t表示制表符,\\表示的字符就是\ 。
- 如果字符串中有很多字符都需要转义，那需要加很多\，为了简化，可以使用`r''`的方式表示内部的字符串默认不转义。例如:

```python
In [18]: print(r"I'm lijun \t")
I'm lijun \t
```

- Python 允许用`'''...'''`的格式表示`多行内容`，如：

```python
print('''name
address
gender
''')
```
输出为：

```python
name
address
gender
```
另外，在`'''...'''`前也能加r，即忽视转义字符。

# 2. 布尔值
布尔值为`True`和`False`，可以使用and , or , not 运算。

# 3. 空值`None`
None不能理解为0，因为0是有意义的，而None是一个特殊的空值。

# 4. 变量
在python中，定义变量是不需要指定类型的，这称之为动态语言，与之对应的是静态语言，比如java，在定义变量时必须指定变量类型。

理解变量在计算机内存中的表示也非常重要。当我们写： a = 'ABC' 时，Python 解释器干了两件事情：
1. 在内存中创建了一个'ABC'的字符串；
2. 在内存中创建了一个名为 a 的变量，并把它指向'ABC'。

另外，也可以把一个变量a赋值给另一个变量b，这个操作实际上是把变量b指向a所指向的数据，如下代码：

```python
a = 'ABC'
b = a
a = 'XYZ'
print(b)
```

上面三个赋值的示意图如下：

![image](https://user-images.githubusercontent.com/18595935/30250127-5f8ba57a-9684-11e7-8bdd-834dbe9b34cb.png)

# 5. 常量
所谓常量，就是不能变的变量，在Python中没有任何机制保证常量不会被改变，约定俗成的做法是全部用大写的变量名表示常量。


# 6. 几种除法

```python
In [19]: 10/3
Out[19]: 3.3333333333333335

In [20]: 10//3  # 整数的地板除//永远是整数，即使除不尽
Out[20]: 3

In [21]: 10%3
Out[21]: 1
```

>小结
python支持多种数据类型，在计算机内部，可以把任何数据都看成一个对象，而变量就是在程序中用来指向这些数据对象的，`对变量赋值就是把数据和变量给关联起来。`


# 7. List列表

Python 内置的一种数据类型是列表：list。list 是一种有序的集合，可以 随时添加和删除其中的元素。
list 和 tuple 是 Python 内置的有序集合，一个可变(可以随时添加和删除其中的元素)，一个不可变。

```python
In [102]: myfamily = ["lijun","wangling","utane","utasuke"]

In [103]: myfamily
Out[103]: ['lijun', 'wangling', 'utane', 'utasuke']

In [104]: len(myfamily) # 取长度
Out[104]: 4

In [105]: myfamily[2] # 取元素
Out[105]: 'utane'

In [106]: myfamily[-1] # 可以负向索引
Out[106]: 'utasuke'

In [107]: myfamily[1:-1] # 切片
Out[107]: ['wangling', 'utane']

In [108]: myfamily.append("lihezheng") # 尾部追加

In [109]: myfamily.insert(1,"dummypet") # 指定位置追加

In [110]: myfamily #
Out[110]: ['lijun', 'dummypet', 'wangling', 'utane', 'utasuke', 'lihezheng']

In [111]: myfamily.pop(1) # 删除弹出指定位置的元素，不指定index的话，弹出末尾的元素
Out[111]: 'dummypet'
```


- 二维数组和空数组：

```python
In [112]: baby = ["utane","utasuke"]

In [113]: myfam = ["lijun","wangling",baby]

In [114]: myfam
Out[114]: ['lijun', 'wangling', ['utane', 'utasuke']]

In [115]: Ldummy = [] # 空list定义

In [116]: len(Ldummy)
Out[116]: 0
```

# 8. Tuple元组

另一种有序列表叫元组：tuple。tuple 和 list 非常类似，但是 tuple 一旦 初始化就不能修改。

不可变的 tuple 有什么意义？因为 tuple 不可变，所以代码更安全。
`如果可能，能用 tuple 代替 list 就尽量用 tuple。 `

```python
In [118]: myfam = ("lijun","wangling","utane","utasuke")

In [119]: myfam.append("newbaby") # 不能append元素
---------------------------------------------------------------------------
AttributeError: 'tuple' object has no attribute 'append'

In [120]: myfam[1]
Out[120]: 'wangling'

In [121]: myfam[1] = "new" # 不能修改元素
---------------------------------------------------------------------------
TypeError: 'tuple' object does not support item assignment

```

1. 当定义一个tuple时，定义的时候tuple的元素就应该定下来。
2. 定义一个空的tuple `t = () `
3. 但是如果要定义只有一个元素的tuple，需要使用`t = (1,) `，如果不加`,`的话，就等同于`t = 1`，因为括号()会被解析为数学意义上的括号。

## 8.1 tuple的"可变性"

参考如下代码：

```python
In [122]: t = ("a","b",["A","B"])

In [124]: t[2][0] = "X"

In [125]: t[2]
Out[125]: ['X', 'B']

In [126]: t[2] = ["X","Y"]
---------------------------------------------------------------------------
TypeError: 'tuple' object does not support item assignment
```

![image](https://user-images.githubusercontent.com/18595935/30378014-d1a31284-98cc-11e7-95ce-a8d38ce4511f.png)

上图可以看到tuple实际上没有变，是tuple指向的目标list变化了。


# 9. dict与set
## 9.1 字典 dict
Python内置字典，在其他语言中也叫map，使用key-value存储，具有极高的查找速度。

```python
In [132]: d = {"lijun":33,"wangling":30,"utane":4,"utasuke":2}

In [133]: d["lijun"]
Out[133]: 33

In [134]: d["lijun"] = 34 # 通过key对value进行修改

```

通过key查找value的方式类似于字典，通过索引直接找到value，查询效率不会因为dict数据量变大而变低。

 - 要避免 key 不存在的错误， 有两种办法，

```python
In [136]: "lixiaoke" in d # 1.是通过 in 判断 key 是否
Out[136]: False

In [137]: d.get("lixiaoke","NotFound") # 2.通过 dict 提供的 get 方法，如果 key 不存在，可以返回 None，或者 自己指定的 value
Out[137]: 'NotFound'

In [138]: d.get("lijun")
Out[138]: 34
```

- 要删除一个key，用`pop(key)`,对应的value也会被删除。

- dict中元素的插入：
dict不是按照0,1,2,...方式排列，不能使用append追加。(dict 内部存放的顺序和 key 放入的顺序是没有关系的)

```python
In [139]: d.append({"dummy":999})
---------------------------------------------------------------------------
AttributeError: 'dict' object has no attribute 'append'

In [140]: d["dummy"] = 999  # 追加key和value

In [141]: d
Out[141]: {'dummy': 999, 'lijun': 34, 'utane': 4, 'utasuke': 2, 'wangling': 30}    

```

## 9.2 dict字典与列表lis差异           

dict 的 key 必须是不可变对象，这是因为dict是根据key来定位value的，如果每次相同的key得到不同的value，那dict内部就混乱了。
这个通过key计算位置的算法，叫做哈希算法。要保证hash正确性，就不能改变key的值。
python中，字符串，整数都是不可变对象，可以放心作为key，而list是可变的，不能作为key。例如

```python
In [142]: key=[1,2]
In [143]: d[key] = 33

TypeError: unhashable type: 'list'
```

## 9.3 set集合
set与dict类似，也是一组key的集合，但是没有value，只有key(本身key就是不重复的)，在set中没有重复的元素。
要创建一个set，需要使用list作为输入集合：

```python
 In [144]: s = set([1, 2, 3])

 In [145]: s
 Out[145]: {1, 2, 3}

 In [146]: s = set([1, 2, 3,3,2,2])

 In [147]: s
 Out[147]: {1, 2, 3}

```

- 重复元素会被自动删除。
- set中元素是无序的，类似dict。
- 通过add(key)和remove(key)，可以添加和删除元素。
- set可以看作是数学上无序和无重复元素的集合，可以做数学意义上的交并差运算。

```python
In [151]: s1 = set([1,2,3,4])

In [152]: s2 = set([2,3,4,5])

In [153]: s1 & s2
Out[153]: {2, 3, 4}

In [154]: s1 | s2 #
Out[154]: {1, 2, 3, 4, 5}

In [155]: s1 - s2
Out[155]: {1}


In [38]: s1 ^ s2 # 只在s1或是s2中存在，不共存
Out[38]: {1, 5}

# set集合{}会取出重复
In [39]: a = {x for x in 'abracadabra' if x not in "abc"}

In [40]: a
Out[40]: {'d', 'r'}

# list列表不会去重
In [43]: a = [x for x in 'abracadabra' if x not in "abc"]

In [44]: a
Out[44]: ['r', 'd', 'r']

In [45]: _   # 表示最后一个被复制的变量
Out[45]: ['r', 'd', 'r']

```

>set 和 dict 的唯一区别仅在于没有存储对应的 value,set 的原理和 dict 一样，
所以，同样不可以放入可变对象，因为无法判断两个可变对 象是否相等， 也就无法保证 set 内部“不会有重复元素”。


# 10. 再议不可变对象
类似于java中的string，各个语言的本质都是类似的。
上面我们说了str是不可变对象，而list是可变对象，对于list进行操作，list本身是会发生变化的。

```python

In [10]: a = ["a","m","c"]

In [11]: a.sort()

In [12]: a
Out[12]: ['a', 'c', 'm']

In [13]: a = 'abc'

In [14]: a.replace('a','A')
Out[14]: 'Abc'

In [15]: a
Out[15]: 'abc'
```

从上面的代码可以看出，list经过sort后就发生了变化，没有返回值。
而str，调用replace后返回了一个新的变化后的对象，但是自身没有变化。

![image](https://user-images.githubusercontent.com/18595935/30378797-59eb1f9a-98cf-11e7-97b2-d7dec195a155.png)

如上图，b相当于新的变化后的对象。


# 11. 条件判断

从上往下判断，如果在某个判断上是 True， 把该判断对应的语句执行后，就忽略掉剩下的 elif 和 else。

语法：

```python
if <条件判断 1>:
  <执行 1>
elif <条件判断 2>:
  <执行 2>
elif <条件判断 3>:
  <执行 3>
else: <执行 4>
```

input()函数接收的是str字符串，根据实际情况可以转换为int后使用，例如`birth = int(s)`。


# 12. 循环
常用循环示例：

```python
names = ['Michael', 'Bob', 'Tracy']
for name in names:
  print(name)
```

```python
sum = 0
for x in range(101):
  sum = sum + x
  print(sum)
```


```python
sum = 0
n = 99
while n > 0:
  sum = sum + n
  n = n - 2
  print(sum)
```
